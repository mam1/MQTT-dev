// in modern C programs, you can simplify this another way, by putting the console I/O into a thread or lightweight process. 
// Then the I/O can go on in the usual blocking fashion, but the data can be inserted into a queue to be processed on another thread.
